<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@400;600;700&family=Playfair+Display:wght@700&display=swap');
  
  :root {
    --primary: #121212;
    --secondary: #333;
    --accent: #d0021b;
    --light: #f7f7f7;
    --border: #e2e2e2;
  }
  
  body {
    font-family: 'Libre Franklin', sans-serif;
    background-color: white;
    color: var(--primary);
    line-height: 1.6;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }
  
  .header {
    border-bottom: 1px solid var(--border);
    padding: 15px 0;
    margin-bottom: 30px;
  }
  
  .header-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .logo {
    font-family: 'Playfair Display', serif;
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--primary);
    text-decoration: none;
    border-bottom: 2px solid var(--accent);
    padding-bottom: 5px;
  }
  
  .main-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  h1 {
    font-family: 'Playfair Display', serif;
    font-size: 2.8rem;
    font-weight: 700;
    margin-bottom: 15px;
    line-height: 1.2;
  }
  
  .subhead {
    font-size: 1.3rem;
    color: var(--secondary);
    margin-bottom: 30px;
    font-weight: 400;
  }
  
  .game-container {
    position: relative;
    margin: 40px 0;
    min-height: 400px;
  }
  
  #szymborska {
    width: 200px;
    cursor: pointer;
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    transition: transform 0.08s ease-out;
    z-index: 20;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border: 1px solid var(--border);
  }
  
  .ghost {
    position: absolute;
    width: 120px;
    opacity: 0;
    z-index: 10;
    pointer-events: none;
    filter: grayscale(100%);
    transition: opacity 0.3s;
  }
  
  .stats {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin: 30px 0;
    font-size: 1.1rem;
  }
  
  .stat-box {
    text-align: center;
    padding: 15px 25px;
    background: var(--light);
    border-radius: 3px;
  }
  
  .stat-value {
    font-weight: 700;
    font-size: 1.4rem;
    margin-top: 5px;
    color: var(--accent);
  }
  
  #continue {
    display: none;
    text-align: center;
    margin: 40px 0;
  }
  
  .continue-btn {
    background: var(--accent);
    color: white;
    padding: 12px 30px;
    border: none;
    font-family: 'Libre Franklin', sans-serif;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.3s;
  }
  
  .continue-btn:hover {
    background: #a00000;
  }
  
  .footer {
    border-top: 1px solid var(--border);
    margin-top: 60px;
    padding: 30px 0;
    text-align: center;
    font-size: 0.9rem;
    color: var(--secondary);
  }
  
  /* Animation des fantômes */
  @keyframes ghostMove {
    0% { transform: translateX(0) translateY(0); opacity: 0.8; }
    100% { transform: translateX(calc(100vw * var(--tx))) translateY(calc(100vh * var(--ty))); opacity: 0; }
  }
</style>
</head>
<body>

<main class="main-container">
  <h1>Test d'Humanité n°1</h1>
  <p class="subhead">Attrapez Szymborska et agitez-la aussi vite que possible</p>
  
  <div class="game-container">
    <img id="szymborska" src="https://onlyart.org/wp-content/uploads/2022/09/wislawa-szymborska.jpg" alt="Wisława Szymborska">
  </div>
  
  <div class="stats">
    <div class="stat-box">
      <div>Score</div>
      <div id="score" class="stat-value">0</div>
    </div>
    <div class="stat-box">
      <div>Temps restant</div>
      <div id="timer" class="stat-value">7s</div>
    </div>
  </div>
  
  <div id="continue">
    <button class="continue-btn">Cliquez ici pour continuer</button>
  </div>
</main>

<script>
// Configuration du jeu
let score = 0;
let timeLeft = 7;
let gameStarted = false;
let attempt = 0;
let isMouseDown = false;
let velocity = 0;

const szymborska = document.getElementById('szymborska');
const scoreDisplay = document.getElementById('score');
const timerDisplay = document.getElementById('timer');
const continueBtn = document.getElementById('continue').querySelector('.continue-btn');

const messages = [
  "Du nerf, Madame, en l'état, vous êtes ni plus ni moins: un robot!",
  "Robot ou pas robot? Robot!",
  "Cette fois, on tire sur l'humain",
  "Ça sent l'anthropos à plein nez!",
  "Bravo! Vous avez passé le premier test!"
];

// Création des fantômes
function createGhost() {
  if (!gameStarted || timeLeft <= 0) return;
  
  const ghost = document.createElement('img');
  ghost.className = 'ghost';
  ghost.src = szymborska.src;
  
  // Position de départ autour de l'image principale
  const angle = Math.random() * Math.PI * 2;
  const distance = 50 + Math.random() * 100;
  const startX = window.innerWidth/2 + Math.cos(angle) * distance;
  const startY = window.innerHeight/2 + Math.sin(angle) * distance;
  
  // Direction aléatoire
  const tx = Math.random() * 2 - 1;
  const ty = Math.random() * 2 - 1;
  
  ghost.style.left = `${startX}px`;
  ghost.style.top = `${startY}px`;
  ghost.style.setProperty('--tx', tx);
  ghost.style.setProperty('--ty', ty);
  
  document.body.appendChild(ghost);
  
  // Animation
  ghost.style.opacity = '0.8';
  ghost.style.animation = `ghostMove ${0.5 + Math.random()}s linear forwards`;
  
  // Suppression après animation
  setTimeout(() => ghost.remove(), 1000);
}

// Lancement du jeu
function startGame() {
  if (!gameStarted) {
    gameStarted = true;
    score = 0;
    timeLeft = 7;
    scoreDisplay.textContent = score;
    timerDisplay.textContent = `${timeLeft}s`;

    const countdown = setInterval(() => {
      timeLeft--;
      timerDisplay.textContent = `${timeLeft}s`;
      
      if (timeLeft <= 0) {
        clearInterval(countdown);
        showResult();
      }
    }, 1000);
  }
}

// Affichage du résultat
function showResult() {
  const message = messages[Math.min(attempt, messages.length - 1)];
  
  // Création d'une overlay style NYT
  const overlay = document.createElement('div');
  overlay.style.position = 'fixed';
  overlay.style.top = '0';
  overlay.style.left = '0';
  overlay.style.width = '100%';
  overlay.style.height = '100%';
  overlay.style.backgroundColor = 'rgba(0,0,0,0.8)';
  overlay.style.display = 'flex';
  overlay.style.justifyContent = 'center';
  overlay.style.alignItems = 'center';
  overlay.style.zIndex = '1000';
  
  // Contenu de l'overlay
  const content = document.createElement('div');
  content.style.backgroundColor = 'white';
  content.style.padding = '40px';
  content.style.maxWidth = '600px';
  content.style.width = '90%';
  content.style.textAlign = 'center';
  
  const heading = document.createElement('h2');
  heading.textContent = message;
  heading.style.fontFamily = "'Playfair Display', serif";
  heading.style.marginBottom = '30px';
  heading.style.fontSize = '1.8rem';
  
  const closeBtn = document.createElement('button');
  closeBtn.textContent = 'Fermer';
  closeBtn.style.background = 'none';
  closeBtn.style.border = '1px solid var(--primary)';
  closeBtn.style.padding = '10px 25px';
  closeBtn.style.fontFamily = "'Libre Franklin', sans-serif";
  closeBtn.style.cursor = 'pointer';
  closeBtn.style.transition = 'all 0.3s';
  
  closeBtn.addEventListener('mouseenter', () => {
    closeBtn.style.background = 'var(--primary)';
    closeBtn.style.color = 'white';
  });
  
  closeBtn.addEventListener('mouseleave', () => {
    closeBtn.style.background = 'none';
    closeBtn.style.color = 'var(--primary)';
  });
  
  closeBtn.addEventListener('click', () => {
    document.body.removeChild(overlay);
    attempt++;
    
    if (attempt >= messages.length) {
      document.getElementById('continue').style.display = 'block';
    } else {
      gameStarted = false;
      szymborska.style.transform = 'translate(-50%, -50%)';
    }
  });
  
  content.appendChild(heading);
  content.appendChild(closeBtn);
  overlay.appendChild(content);
  document.body.appendChild(overlay);
}

// Événements
szymborska.addEventListener('mousedown', (e) => {
  isMouseDown = true;
  startGame();
});

document.addEventListener('mouseup', () => {
  isMouseDown = false;
});

document.addEventListener('mousemove', (e) => {
  if (gameStarted && timeLeft > 0 && isMouseDown) {
    // Calcul de la vitesse
    velocity = Math.sqrt(e.movementX ** 2 + e.movementY ** 2);
    
    // Mouvement de l'image principale
    const shakeX = (Math.random() * 30 - 15) * (velocity/10) + 'px';
    const shakeY = (Math.random() * 30 - 15) * (velocity/10) + 'px';
    const rotate = (Math.random() * 20 - 10) * (velocity/20) + 'deg';
    
    szymborska.style.transform = `
      translate(-50%, -50%) 
      translate(${shakeX}, ${shakeY})
      rotate(${rotate})
    `;
    
    // Création de fantômes
    if (Math.random() < velocity/150) {
      createGhost();
    }
    
    // Mise à jour du score
    score += Math.floor(velocity/3);
    scoreDisplay.textContent = score;
  }
});

// Lien de continuation
continueBtn.addEventListener('click', () => {
  window.location.href = 'Szymbo.html';
});
</script>

</body>
</html>
